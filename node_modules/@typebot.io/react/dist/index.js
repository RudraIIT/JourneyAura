// v0.2.64
import{jsx as e}from"react/jsx-runtime";import{useRef as t,useEffect as r,useCallback as o}from"react";import"@typebot.io/js/dist/web";"function"==typeof SuppressedError&&SuppressedError;const n=o=>{var{style:n,className:s}=o,a=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]])}return r}(o,["style","className"]);const c=t(null);return r((()=>{c.current&&Object.assign(c.current,a)}),[a]),e("typebot-standard",{ref:c,style:n,class:s})},s=e=>{const n=t(null),s=o((e=>{const t=document.createElement("typebot-bubble");n.current=t,a(n.current,e),document.body.prepend(n.current)}),[]);r((()=>{n.current||s(e),a(n.current,e)}),[s,e]),r((()=>()=>{var e;null===(e=n.current)||void 0===e||e.remove(),n.current=null}),[]);const a=(e,t)=>{Object.assign(e,t)};return null},a=n=>{const s=t(null),a=t(null),c=o((e=>{var t;const r=document.createElement("typebot-popup");a.current=r,u(a.current,e),s.current?null===(t=s.current)||void 0===t||t.append(a.current):console.warn("Could not attach popup to container because containerRef.current is null")}),[]);r((()=>{a.current||c(n),u(a.current,n)}),[c,n]),r((()=>()=>{var e;null===(e=a.current)||void 0===e||e.remove(),a.current=null}),[]);const u=(e,t)=>{Object.assign(e,t)};return e("div",{ref:s})},c=()=>{window.postMessage({isFromTypebot:!0,command:"close"})},u=()=>{window.postMessage({isFromTypebot:!0,command:"hidePreviewMessage"})},l=()=>{window.postMessage({isFromTypebot:!0,command:"open"})},p=e=>{const t={isFromTypebot:!0,command:"setPrefilledVariables",variables:e};window.postMessage(t)},i=e=>{const t={isFromTypebot:!0,command:"showPreviewMessage",message:e};window.postMessage(t)},m=()=>{window.postMessage({isFromTypebot:!0,command:"toggle"})},d=e=>{const t={isFromTypebot:!0,command:"setInputValue",value:e};window.postMessage(t)},b=()=>{window.postMessage({isFromTypebot:!0,command:"unmount"})};export{s as Bubble,a as Popup,n as Standard,c as close,u as hidePreviewMessage,l as open,d as setInputValue,p as setPrefilledVariables,i as showPreviewMessage,m as toggle,b as unmount};
